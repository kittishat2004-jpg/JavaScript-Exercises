{% extends "base.html" %}
{% load static %} 

{% block title %}
    แบบฝึกหัด JavaScript  
{% endblock %}

{% block content %}

    <h1 class="text-3xl font-bold mb-8 text-center text-gray-800">แบบฝึกหัด JavaScript</h1>

    <!-- ข้อ 1: เปลี่ยนสีข้อความ -->
    <div class="exercise-section">
        <div class="exercise-title text-center">1. แสดงคำว่า "สวัสดีชาวโลก" ด้วยข้อความสีดำ เมื่อกดปุ่ม เปลี่ยนสี ให้เปลี่ยนเป็นสีแดง</div>
        <div class="flex items-center justify-center mt-4">        
            <p id="helloText" class="text-4xl font-bold text-black">สวัสดีชาวโลก</p>
            <p class="arrow text-center mx-4">→</p>
            <p id="helloTextResult" class="text-4xl font-bold" style="color: black;">สวัสดีชาวโลก</p>
        </div>
        <div class="flex justify-center mt-6">
            <button id="changeColorBtn" class="px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition">เปลี่ยนสี</button>
        </div>
    </div>

    <!-- ข้อ 2: แสดงวันและเวลาปัจจุบัน -->
    <div class="exercise-section">
        <div class="exercise-title text-center">2. ให้แสดงวันและเวลาปัจจุบัน ในรูปแบบไทยดังรูป</div>
        <div class="text-center mt-4">
            <p id="currentDateTime" class="text-2xl font-semibold text-gray-700">20 มิถุนายน 2565 07:55:32</p>
        </div>
    </div>

    <!-- ข้อ 3: สลับภาพแมว -->
    <div class="exercise-section">
        <div class="exercise-title text-center">3. ให้แสดงภาพแมว ซึ่งสามารถสลับทิศทางของแมวตามการกดปุ่มได้ ดังรูป</div>
        <div class="flex items-center justify-center mt-4">
            <img id="catImage" src="{% static 'images/Idle.png' %}" alt="Cat Standing" class="cat-image">
            <p class="arrow text-center mx-4">→</p>
            <img id="catImageResult" src="{% static 'images/Idle.png' %}" alt="Cat Result" class="cat-image"> <!-- แก้ไขให้ภาพเริ่มต้นเหมือนกัน -->
        </div>
        <div class="flex justify-center mt-6 space-x-4">
            <button id="catLeftBtn" class="px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition" data-cat-image="{% static 'images/Idle.png' %}">แมวยืน</button>
            <button id="catRightBtn" class="px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition" data-cat-image="{% static 'images/Slide.png' %}">แมวสไลด์</button>
        </div>
    </div>

    <!-- ข้อ 4: ซ่อน/แสดงตาราง -->
    <div class="exercise-section">
        <div class="exercise-title text-center">4. ให้สร้างปุ่มซ่อนหรือแสดงตารางได้ ดังรูป</div>
        <div class="flex justify-center mt-4 space-x-4">
            <button id="showTableBtn" class="px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition">แสดงตาราง</button>
            <button id="hideTableBtn" class="px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition">ซ่อนตาราง</button>
        </div>
        <table id="dataTable" class="hidden w-full mt-6">
            <caption class="text-lg font-semibold p-2">ตารางสินค้า</caption>
            <thead>
                <tr class="bg-gray-100">
                    <th class="border p-2">รายการที่ 1</th>
                    <th class="border p-2">รายการที่ 2</th>
                    <th class="border p-2">รายการที่ 3</th>
                </tr>
            </thead>
            <tbody class="text-center">
                <tr>
                    <td class="border p-2">8</td>
                    <td class="border p-2">16</td>
                    <td class="border p-2">32</td>
                </tr>
                <tr>
                    <td class="border p-2">64</td>
                    <td class="border p-2">128</td>
                    <td class="border p-2">256</td>
                </tr>
            </tbody>
        </table>
    </div>

    <!-- ข้อ 5: คำนวณค่าตัวเลข -->
    <div class="exercise-section">
        <div class="exercise-title text-center">5. ให้รับข้อมูลตัวเลข 3  ตัวจากผู้ใช้ผ่าน input box แล้วเมื่อกดปุ่ม Submit แสดงค่าเฉลี่ย ค่าสูงสุด และค่าตํ่าสุดออกมา</div>
        <div class="flex flex-col md:flex-row mt-4">
            <div class="w-full md:w-1/2 md:pr-4">
                <div class="input-group mb-2">
                    <label for="num1" class="block mb-1">Number #1</label>
                    <input type="number" id="num1" value="10" class="w-full p-2 border rounded">
                </div>
                <div class="input-group mb-2">
                    <label for="num2" class="block mb-1">Number #2</label>
                    <input type="number" id="num2" value="15" class="w-full p-2 border rounded">
                </div>
                <div class="input-group mb-4">
                    <label for="num3" class="block mb-1">Number #3</label>
                    <input type="number" id="num3" value="20" class="w-full p-2 border rounded">
                </div>
                <button id="calculateBtn" class="w-full px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition">Submit</button>
            </div>
            <div class="w-full md:w-1/2 md:pl-4 mt-6 md:mt-0 md:border-l md:border-gray-300 flex flex-col justify-center">
                <div class="result-text text-left p-4">
                    <p class="text-lg">ค่าเฉลี่ยคือ: <span id="avgResult" class="font-semibold"></span></p>
                    <p class="text-lg">ค่าสูงสุดคือ: <span id="maxResult" class="font-semibold"></span></p>
                    <p class="text-lg">ค่าต่ำสุดคือ: <span id="minResult" class="font-semibold"></span></p>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ข้อ 6: ฟอร์มลงทะเบียน -->
    <div class="exercise-section">
        <div class="exercise-title text-center">6. ให้สร้างฟอร์มที่ใช้ในการลงทะเบียนโดยมีการตรวจสอบข้อมูลก่อนจะ Submit ดังรูป</div>
        <div class="flex justify-center mt-6">
             <form id="registrationForm" class="bg-white p-8 rounded-lg shadow-md border w-full max-w-4xl">
                <h3 class="text-2xl font-bold mb-8 text-center text-gray-800">ลงทะเบียน</h3>
                <div class="flex">
                    <div class="w-1/2 pr-8">
                        <div class="flex items-center mb-5">
                            <label for="regName" class="w-24 text-right pr-4 font-medium text-gray-700">ชื่อ:</label>
                            <input type="text" id="regName" name="regName" class="flex-1 p-2 border border-gray-300 rounded-md shadow-sm">
                        </div>
                        <div class="flex items-center mb-5">
                            <label for="regAddress" class="w-24 text-right pr-4 font-medium text-gray-700">ที่อยู่:</label>
                            <input type="text" id="regAddress" name="regAddress" class="flex-1 p-2 border border-gray-300 rounded-md shadow-sm">
                        </div>
                        <div class="flex items-center mb-5">
                            <label for="regEmail" class="w-24 text-right pr-4 font-medium text-gray-700">อีเมล:</label>
                            <input type="email" id="regEmail" name="regEmail" class="flex-1 p-2 border border-gray-300 rounded-md shadow-sm">
                        </div>
                        <div class="flex items-center mb-5">
                            <label for="regPassword" class="w-24 text-right pr-4 font-medium text-gray-700">รหัสผ่าน:</label>
                            <input type="password" id="regPassword" name="regPassword" class="flex-1 p-2 border border-gray-300 rounded-md shadow-sm">
                        </div>
                        <div class="flex items-center mb-5">
                            <label for="regCourse" class="w-24 text-right pr-4 font-medium text-gray-700">เลือกคอร์ส:</label>
                            <select id="regCourse" name="regCourse" class="flex-1 p-2 border border-gray-300 rounded-md shadow-sm">
                                <option value="">-- กรุณาเลือกคอร์ส --</option>
                                <option value="html">HTML</option>
                                <option value="css">CSS</option>
                                <option value="javascript">JavaScript</option>
                            </select>
                        </div>
                        <div class="flex items-center ml-24 mb-6">
                            <input type="checkbox" id="regAgree" name="regAgree" class="h-4 w-4 text-indigo-600 border-gray-300 rounded">
                            <label for="regAgree" class="ml-2 block text-sm text-gray-900">ฉันยอมรับเงื่อนไขและข้อตกลง</label>
                        </div>
                        <div class="flex items-center ml-24">
                            <button type="submit" class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition">Submit</button>
                            <button type="reset" class="ml-4 px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300 transition">Reset</button>
                        </div>
                    </div>
                    <div class="w-1/2 pl-4">
                        <div class="flex items-center mb-5 h-10"><p id="regNameError" class="text-red-600 text-sm hidden">กรุณากรอกชื่อ-นามสกุลของคุณ</p></div>
                        <div class="flex items-center mb-5 h-10"><p id="regAddressError" class="text-red-600 text-sm hidden">กรุณากรอกที่อยู่ของคุณ</p></div>
                        <div class="flex items-center mb-5 h-10"><p id="regEmailError" class="text-red-600 text-sm hidden">กรุณากรอกอีเมลที่ถูกต้อง</p></div>
                        <div class="flex items-center mb-5 h-10"><p id="regPasswordError" class="text-red-600 text-sm hidden">กรุณากำหนดรหัสผ่านอย่างน้อย 6 ตัวอักษร</p></div>
                        <div class="flex items-center mb-5 h-10"><p id="regCourseError" class="text-red-600 text-sm hidden">กรุณาเลือกคอร์สที่ต้องการ</p></div>
                        <div class="flex items-center mt-1"><p id="regAgreeError" class="text-red-600 text-sm hidden">คุณต้องยอมรับเงื่อนไขก่อนลงทะเบียน</p></div>
                    </div>
                </div>
            </form>
        </div>
    </div>


    <script>
        // ข้อ 1: เปลี่ยนสีข้อความ
        const changeColorBtn = document.getElementById('changeColorBtn');
        const helloTextResult = document.getElementById('helloTextResult');
        changeColorBtn.addEventListener('click', () => {
            helloTextResult.style.color = (helloTextResult.style.color === 'black') ? 'red' : 'black';
        });

        function updateDateTime() {
            const now = new Date();
            const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false };
            const formatter = new Intl.DateTimeFormat('th-TH', options);
            document.getElementById('currentDateTime').textContent = formatter.format(now);
        }
        updateDateTime();
        setInterval(updateDateTime, 1000);

        // ข้อ 3: สลับภาพแมว
        const catLeftBtn = document.getElementById('catLeftBtn');
        const catRightBtn = document.getElementById('catRightBtn');
        const catImageResult = document.getElementById('catImageResult');
        catLeftBtn.addEventListener('click', () => {
            catImageResult.src = catLeftBtn.dataset.catImage;
        });
        catRightBtn.addEventListener('click', () => {
            catImageResult.src = catRightBtn.dataset.catImage;
        });
        
        // ข้อ 4: ซ่อน/แสดงตาราง
        const showTableBtn = document.getElementById('showTableBtn');
        const hideTableBtn = document.getElementById('hideTableBtn');
        const dataTable = document.getElementById('dataTable');
        showTableBtn.addEventListener('click', () => dataTable.classList.remove('hidden'));
        hideTableBtn.addEventListener('click', () => dataTable.classList.add('hidden'));

        // ข้อ 5: คำนวณค่าตัวเลข
        const calculateBtn = document.getElementById('calculateBtn');
        calculateBtn.addEventListener('click', () => {
            const n1 = parseFloat(document.getElementById('num1').value);
            const n2 = parseFloat(document.getElementById('num2').value);
            const n3 = parseFloat(document.getElementById('num3').value);
            if (!isNaN(n1) && !isNaN(n2) && !isNaN(n3)) {
                const numbers = [n1, n2, n3];
                document.getElementById('avgResult').textContent = (numbers.reduce((a, b) => a + b, 0) / numbers.length).toFixed(2);
                document.getElementById('maxResult').textContent = Math.max(...numbers);
                document.getElementById('minResult').textContent = Math.min(...numbers);
            } else {
                document.getElementById('avgResult').textContent = "โปรดป้อนตัวเลข";
                document.getElementById('maxResult').textContent = "N/A";
                document.getElementById('minResult').textContent = "N/A";
            }
        });

        // ข้อ 6: ฟอร์มลงทะเบียน
        const registrationForm = document.getElementById('registrationForm');
        registrationForm.addEventListener('submit', function(event) {
            event.preventDefault();
            let isValid = true;
            const fields = [
                { id: 'regName', errorId: 'regNameError', validate: (val) => val.trim() !== '' },
                { id: 'regAddress', errorId: 'regAddressError', validate: (val) => val.trim() !== '' },
                { id: 'regEmail', errorId: 'regEmailError', validate: (val) => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(val) },
                { id: 'regPassword', errorId: 'regPasswordError', validate: (val) => val.length >= 6 },
                { id: 'regCourse', errorId: 'regCourseError', validate: (val) => val !== '' },
                { id: 'regAgree', errorId: 'regAgreeError', validate: (val, el) => el.checked }
            ];

            fields.forEach(field => {
                const element = document.getElementById(field.id);
                const errorElement = document.getElementById(field.errorId);
                if (!field.validate(element.value, element)) {
                    errorElement.classList.remove('hidden');
                    isValid = false;
                } else {
                    errorElement.classList.add('hidden');
                }
            });

            if (isValid) {
                alert('ลงทะเบียนสำเร็จ!');
                registrationForm.reset();
                fields.forEach(field => document.getElementById(field.errorId).classList.add('hidden'));
            }
        });
    </script>
{% endblock %}
